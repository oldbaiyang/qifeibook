#!/usr/bin/env python3
"""
手动补充书籍信息
"""

import re
from pathlib import Path

# 手动整理的书籍信息(基于常识)
book_info = {
    "活着": {
        "author": "余华",
        "authorDetail": "余华,当代著名作家,中国先锋文学代表人物",
        "description": "地主少爷富贵嗜赌成性,终于赌光了家业一贫如洗。穷困之中的富贵因为母亲生病前去求医,没想到半路上被国民党部队抓了壮丁,后被解放军所俘虏,回到家乡他才知道母亲已经去世,妻子家珍含辛茹苦带大了一双儿女,但女儿不幸变成了聋哑人,儿子机灵活泼……",
        "year": "1993"
    },
    "三体全集": {
        "author": "刘慈欣",
        "authorDetail": "刘慈欣,中国科幻小说代表作家,雨果奖得主",
        "description": "文化大革命如火如荼地进行,天文学家叶文洁在其间历经劫难,被带到军方绝秘计划'红岸工程'。叶文洁以太阳为天线,向宇宙发出地球文明的第一声啼鸣,取得了探寻外星文明的突破性进展。三颗无规则运行的太阳主导下,四光年外的'三体文明'百余次毁灭与重生,正被逼迫不得不逃离母星,而恰在此时,他们接收到了地球发来的信息……",
        "year": "2008"
    },
    "百年孤独": {
        "author": "[哥伦比亚] 加西亚·马尔克斯",
        "authorDetail": "加西亚·马尔克斯,哥伦比亚作家,诺贝尔文学奖得主,魔幻现实主义文学代表",
        "description": "《百年孤独》是魔幻现实主义文学的代表作,描写了布恩迪亚家族七代人的传奇故事,以及加勒比海沿岸小镇马孔多的百年兴衰,反映了拉丁美洲一个世纪以来风云变幻的历史。作品融入神话传说、民间故事、宗教典故等因素,巧妙地糅合了现实与虚幻,展现出一个瑰丽的想象世界。",
        "year": "1967"
    },
    "飘": {
        "author": "[美] 玛格丽特·米切尔",
        "authorDetail": "玛格丽特·米切尔,美国作家,《飘》是其唯一的长篇小说",
        "description": "《飘》是一部有关战争的小说,但作者没有把着眼点放在战场上。除了亚特兰大之围,作者详细描述过战争,其余的战争场面几乎都是一笔带过。她以女性特有的细腻、真切和委婉,从女主人公的心理感受上反映战争的动荡和残酷,塑造了郝思嘉这个性格复杂、极富魅力的女性形象。",
        "year": "1936"
    },
    "动物农场": {
        "author": "[英] 乔治·奥威尔",
        "authorDetail": "乔治·奥威尔,英国作家,《1984》《动物农场》作者",
        "description": "农场的一群动物成功地进行了一场'革命',将压榨他们的人类东家赶出农场,建立起一个平等的动物社会。然而,动物领袖,那些聪明的猪们最终却篡夺了革命的果实,成为比人类东家更加独裁和极权的统治者。",
        "year": "1945"
    },
    "房思琪的初恋乐园": {
        "author": "林奕含",
        "authorDetail": "林奕含,台湾作家,本书是其唯一一部长篇小说",
        "description": "令人心碎却无能为力的真实故事。向死而生的文学绝唱。李银河、张悦然、冯唐、詹宏志、蒋方舟 万千读者 强力推荐!这是一部惊人而特别的小说,小说作者既具有高度敏锐的感受力、又是一个近乎疯狂的语言天才。",
        "year": "2017"
    },
    "三国演义": {
        "author": "罗贯中",
        "authorDetail": "罗贯中,元末明初小说家,中国古典四大名著作者之一",
        "description": "《三国演义》描写的是从东汉末年到西晋初年之间近一百年的历史风云。全书反映了三国时代的政治军事斗争,反映了三国时代各类社会矛盾的渗透与转化,概括了这一时代的历史巨变,塑造了一批咤叱风云的英雄人物。",
        "year": "明代"
    },
    "福尔摩斯探案全集": {
        "author": "[英] 阿瑟·柯南·道尔",
        "authorDetail": "阿瑟·柯南·道尔,英国作家,福尔摩斯系列作品的创作者",
        "description": "福尔摩斯是一个虚构的侦探人物,是由19世纪末的英国侦探小说家阿瑟·柯南·道尔所塑造的一个才华横溢的侦探形象。福尔摩斯自己称自己是一名'咨询侦探',也就是说,当其他私人或官方侦探遇到困难时常常向他求救。",
        "year": "1887-1927"
    },
    "白夜行": {
        "author": "[日] 东野圭吾",
        "authorDetail": "东野圭吾,日本推理小说家,代表作《白夜行》《嫌疑人X的献身》等",
        "description": "《白夜行》将无望却坚守的凄凉爱情和执著而缜密的冷静推理完美结合。一九七三年,大阪一栋废弃建筑内发现一名遭利器刺死的男子。此后十九年,嫌疑人之女雪穗与被害者之子桐原亮司走上截然不同的人生道路,一个跻身上流社会,一个却在底层游走,而他们身边的人,却接二连三地离奇死去,警察经过十九年的艰辛追踪,终于使真相大白……",
        "year": "1999"
    },
    "呐喊": {
        "author": "鲁迅",
        "authorDetail": "鲁迅,中国现代文学的奠基人之一,伟大的文学家、思想家、革命家",
        "description": "《呐喊》是鲁迅1918年至1922年所作的短篇小说的结集,收有《狂人日记》《孔乙己》《药》《阿Q正传》《故乡》等14篇作品。当时正值'五四运动'时期,作者创作小说意在描写'病态社会的不幸的人们',揭示旧中国的社会问题,唤醒麻木的中国民众。",
        "year": "1923"
    },
    "小王子": {
        "author": "[法] 圣埃克苏佩里",
        "authorDetail": "圣埃克苏佩里,法国作家、飞行员,《小王子》作者",
        "description": "小王子是一个超凡脱俗的仙童,他住在一颗只比他大一丁点儿的小行星上。陪伴他的是一朵他非常喜爱的小玫瑰花。但玫瑰花的虚荣心伤害了小王子对她的感情。小王子告别小行星,开始了遨游太空的旅行。他先后访问了六个行星,各种见闻使他陷入忧伤,他感到大人们荒唐可笑、太不正常。",
        "year": "1943"
    },
    "安徒生童话故事集": {
        "author": "[丹麦] 安徒生",
        "authorDetail": "安徒生,丹麦作家,世界著名童话作家",
        "description": "《安徒生童话》是丹麦作家安徒生创作的童话集。该作爱憎分明,热情歌颂劳动人民、赞美他们的善良和纯洁的优秀品德;无情地揭露和批判王公贵族们的愚蠢、无能、贪婪和残暴。其中较为闻名的故事有《小美人鱼》、《丑小鸭》、《卖火柴的小女孩》、《拇指姑娘》等。",
        "year": "1835-1872"
    },
    "撒哈拉的故事": {
        "author": "三毛",
        "authorDetail": "三毛,台湾著名女作家,本名陈懋平",
        "description": "三毛作品中最膾炙人口的《撒哈拉的故事》,是她在撒哈拉沙漠生活时的见闻,以及她思考和感怀的结晶。不论是爱情、友谊、还是对大自然的热爱,都反映在她的作品里,广受读者喜爱。",
        "year": "1976"
    },
    "失踪的孩子": {
        "author": "[意] 埃莱娜·费兰特",
        "authorDetail": "埃莱娜·费兰特,意大利作家,'那不勒斯四部曲'作者",
        "description": "《失踪的孩子》是'那不勒斯四部曲'的第四部,也是完结篇。时间跨度长达半个世纪。通过莉拉和埃莱娜的个人命运、恩怨纠葛,描绘了二战后意大利政治、经济和社会状况的变迁,展现了一幅意大利现当代的史诗画卷。",
        "year": "2014"
    },
    "天龙八部": {
        "author": "金庸",
        "authorDetail": "金庸,本名查良镛,武侠小说泰斗,香港'四大才子'之一",
        "description": "《天龙八部》以宋哲宗时代为背景,通过宋、辽、大理、西夏、吐蕃等王国之间的武林恩怨和民族矛盾,从哲学的高度对人生和社会进行审视和描写,展示了一幅波澜壮阔的生活画卷,将人性、情感和浩 然正气发挥到了极致。其故事之离奇曲折、涉及人物之众多、历史背景之广泛、武侠战役之庞大、想象力之丰富,当属'金书'之最。",
        "year": "1963"
    },
    "卡拉马佐夫兄弟": {
        "author": "[俄] 陀思妥耶夫斯基",
        "authorDetail": "陀思妥耶夫斯基,19世纪俄国批判现实主义作家",
        "description": "《卡拉马佐夫兄弟》是陀思妥耶夫斯基的代表作之一,也是他的最后一部小说。小说通过一桩真实发生过的弑父案,描写老卡拉马佐夫同三个儿子即两代人之间的尖锐冲突。老卡拉马佐夫贪婪好色,独占妻子留给儿子们的遗产,并与长子德米特里为一个风流女子争风吃醋。",
        "year": "1880"
    },
    "新名字的故事": {
        "author": "[意] 埃莱娜·费兰特",
        "authorDetail": "埃莱娜·费兰特,意大利当代匿名作家,'那不勒斯四部曲'作者",
        "description": "《新名字的故事》是'那不勒斯四部曲'的第二部,描述了莉拉和埃莱娜的青年时代。在她们的人生中,痛苦和幸福、愤怒和压抑、希望和绝望依然紧紧交织。她们在各自的生活中努力挣扎,试图找到属于自己的位置。",
        "year": "2012"
    },
    "杀死一只知更鸟": {
        "author": "[美] 哈珀·李",
        "authorDetail": "哈珀·李,美国作家,普利策小说奖得主",
        "description": "《杀死一只知更鸟》讲述了20世纪30年代美国南方一个小镇上,律师阿提克斯为一名被指控强奸白人女子的黑人辩护的故事。小说通过两个孩子的视角,展现了种族偏见、社会不公以及成长的阵痛,是一部感人至深的经典之作。",
        "year": "1960"
    },
    "野草": {
        "author": "鲁迅",
        "authorDetail": "鲁迅,中国现代文学奠基人",
        "description": "《野草》是鲁迅先生唯一的一部散文诗集,收录了他在1924年至1926年间创作的23篇散文诗。作品以隐晦的象征、富于诗意的意象和充满张力的语言,表达了作者对现实的绝望、抗争以及对生命意义的深刻思考。",
        "year": "1927"
    },
    "沉默的大多数": {
        "author": "王小波",
        "authorDetail": "王小波,中国当代著名学者、作家",
        "description": "《沉默的大多数》是王小波的一部杂文随笔集。作者以幽默智慧的笔触,对社会现象、文化传统、人性心理等进行了深入的剖析和批判,倡导自由、理性、独立的思考精神。",
        "year": "1997"
    },
    "罗杰疑案": {
        "author": "[英] 阿加莎·克里斯蒂",
        "authorDetail": "阿加莎·克里斯蒂,英国侦探小说女王",
        "description": "《罗杰疑案》是阿加莎·克里斯蒂的成名作,也是侦探小说史上的经典之作。小说讲述了住在金艾博特村的富翁罗杰·艾克罗伊德离奇身亡,大侦探波洛介入调查的故事。结局出人意料,开创了侦探小说的一种全新模式。",
        "year": "1926"
    },
    "悉达多": {
        "author": "[德] 赫尔曼·黑塞",
        "authorDetail": "赫尔曼·黑塞,德国作家,诺贝尔文学奖得主",
        "description": "《悉达多》讲述了古印度贵族青年悉达多为了追求心灵的安宁和生命的真谛,离家出走,历经各种人生体验,最终在流水的启示下悟道的故事。这是一部关于自我发现和精神成长的寓言。",
        "year": "1922"
    },
    "我与地坛": {
        "author": "史铁生",
        "authorDetail": "史铁生,中国当代著名作家",
        "description": "《我与地坛》是史铁生的散文代表作。作者身患残疾,在最狂妄的年龄失去了双腿。他在地坛的古园中沉思冥想,对生命、死亡、命运等终极问题进行了深刻的感悟。文字深沉凝重,感人肺腑。",
        "year": "1991"
    },
    "许三观卖血记": {
        "author": "余华",
        "authorDetail": "余华,中国当代先锋文学代表作家",
        "description": "《许三观卖血记》讲述了丝厂送茧工许三观靠卖血度过人生一个个难关的故事。小说以卖血为主线,串联起许三观的一生,展现了小人物在苦难生活中的生存智慧和顽强生命力。",
        "year": "1995"
    },
    "彷徨": {
        "author": "鲁迅",
        "authorDetail": "鲁迅,中国现代文学奠基人",
        "description": "《彷徨》是鲁迅的第二部小说集,收录了他在1924年至1925年间创作的11篇小说,包括《祝福》《在酒楼上》《伤逝》等。作品反映了五四运动后知识分子的苦闷和彷徨,以及对社会现实的深刻批判。",
        "year": "1926"
    },
    "局外人": {
        "author": "[法] 阿尔贝·加缪",
        "authorDetail": "阿尔贝·加缪,法国作家、哲学家,存在主义文学代表人物,诺贝尔文学奖得主",
        "description": "《局外人》是加缪的成名作。小说塑造了默尔索这个'局外人'形象,他对母亲的死、女友的感情、杀人等都表现得冷漠无动于衷。小说揭示了世界的荒诞性以及人与社会的疏离。",
        "year": "1942"
    },
    "白鹿原": {
        "author": "陈忠实",
        "authorDetail": "陈忠实,中国当代著名作家,茅盾文学奖得主",
        "description": "《白鹿原》是一部渭河平原50年变迁的雄奇史诗,一轴中国农村斑斓多彩、触目惊心的长幅画卷。小说以白嘉轩为叙事核心,描写了白鹿两家三代人的恩怨纠葛,展现了从清末民初到建国之初中国农村的历史演变。",
        "year": "1993"
    },
    "乡土中国": {
        "author": "费孝通",
        "authorDetail": "费孝通,中国著名社会学家、人类学家",
        "description": "《乡土中国》是费孝通先生的一部社会学经典著作。书中探讨了中国基层传统社会结构及其运作逻辑,提出了'差序格局'、'礼治秩序'、'无讼'等重要概念,深刻剖析了中国乡土社会的特点。",
        "year": "1947"
    },
    "平凡的世界（全三部）": {
        "author": "路遥",
        "authorDetail": "路遥,中国当代作家,茅盾文学奖得主",
        "description": "《平凡的世界》是一部全景式地表现中国当代城乡社会生活的长篇小说。小说以孙少安和孙少平两兄弟为中心,刻画了当时社会各阶层众多普通人的形象;劳动与爱情、挫折与追求、痛苦与欢乐、日常生活与巨大社会冲突纷繁地交织在一起,深刻地展示了普通人在大时代历史进程中所走过的艰难曲折的道路。",
        "year": "1986"
    },
    "人类简史": {
        "author": "[以] 尤瓦尔·赫拉利",
        "authorDetail": "尤瓦尔·赫拉利,以色列历史学家",
        "description": "《人类简史:从动物到上帝》从大历史的视角,审视了人类历史上的三次革命:认知革命、农业革命和科学革命。作者以新颖的观点和宏大的视野,探讨了人类如何从一种不起眼的动物演变为地球的主宰,以及人类社会的未来走向。",
        "year": "2011"
    },
    "围城": {
        "author": "钱钟书",
        "authorDetail": "钱钟书,中国现代著名学者、作家",
        "description": "《围城》是钱钟书先生唯一的一部长篇小说,被誉为'新儒林外史'。小说以方鸿渐的经历为主线,描绘了抗战初期知识分子的群像,揭示了'围城'困境:城外的人想冲进去,城里的人想逃出来。",
        "year": "1947"
    },
    "笑傲江湖（全四册）": {
        "author": "金庸",
        "authorDetail": "金庸,武侠小说泰斗",
        "description": "《笑傲江湖》属于金庸的后期作品。小说通过叙述华山派大弟子令狐冲的经历,反映了武林各派争霸夺权的血腥斗争,揭露了伪君子和野心家的丑恶面目,歌颂了令狐冲追求自由、不畏强权的独立人格。",
        "year": "1967"
    },
    "献给阿尔吉侬的花束": {
        "author": "[美] 丹尼尔·凯斯",
        "authorDetail": "丹尼尔·凯斯,美国作家,心理学家",
        "description": "查理·高登是低智商者,他参加了一项提高智力的实验手术。手术后,他的智商逐渐提高,变成了一个天才。然而,他发现原本的朋友和同事开始排斥他,他也发现了社会中隐藏的残酷真相。同时,同样接受手术的实验白鼠阿尔吉侬出现了退化现象,预示着查理的命运......",
        "year": "1959"
    },
    "东方快车谋杀案": {
        "author": "[英] 阿加莎·克里斯蒂",
        "authorDetail": "阿加莎·克里斯蒂,侦探小说女王",
        "description": "午夜过后,一场大雪迫使东方快车停了下来。侦探波洛在列车上。第二天早上,大家发现萨缪埃尔·雷切特死在了他的包厢里,身中十二刀。车上的乘客都有嫌疑,波洛展开了调查,最终揭开了一个惊人的秘密。",
        "year": "1934"
    },
    "故事新编": {
        "author": "鲁迅",
        "authorDetail": "鲁迅,中国现代文学奠基人",
        "description": "《故事新编》是鲁迅的最后一部小说集,收录了他在1922年至1935年间创作的8篇历史小说。作者以远古神话和历史传说为题材,注入现代意识,进行了大胆的改编和重构,充满了奇特的想象和辛辣的讽刺。",
        "year": "1936"
    }
}

# 读取 mockData.js
mockdata_path = Path("src/data/mockData.js")
with open(mockdata_path, "r", encoding="utf-8") as f:
    content = f.read()

# 更新每本书的信息
for title, info in book_info.items():
    print(f"更新: {title}")
    
    # 替换 author: "待补充"
    content = re.sub(
        rf'(title: "{re.escape(title)}".*?)author: "待补充"',
        rf'\1author: "{info["author"]}"',
        content,
        flags=re.DOTALL
    )
    
    # 替换 authorDetail: "待补充"
    content = re.sub(
        rf'(title: "{re.escape(title)}".*?)authorDetail: "待补充"',
        rf'\1authorDetail: "{info["authorDetail"]}"',
        content,
        flags=re.DOTALL
    )
    
    # 替换 description
    desc = info['description'].replace('"', '\\"').replace('\n', ' ')
    content = re.sub(
        rf'(title: "{re.escape(title)}".*?)description: "{re.escape(title)}"',
        rf'\1description: "{desc}"',
        content,
        flags=re.DOTALL
    )
    
    # 替换 year
    if 'year' in info:
        content = re.sub(
            rf'(title: "{re.escape(title)}".*?)year: "2024"',
            rf'\1year: "{info["year"]}"',
           content,
            flags=re.DOTALL,
            count=1
        )

# 写回文件
with open(mockdata_path, "w", encoding="utf-8") as f:
    f.write(content)

print(f"\n✅ 已更新 {len(book_info)} 本书的信息")
